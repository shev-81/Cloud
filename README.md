<h1 align="center">Cloud
<h3 align="center">Облачное хранилище файлов (Java IO, NIO, Netty, StreamAPI + Java FX)</h3>

<a href="https://shev-81.github.io/Cloud-netty/"><img src="https://img.shields.io/badge/Cloud-JavaDoc-green"/>  </a>


## 0. Предисловие 
Проект написан, в рамках изучения мной сетевого фреймворка `Netty`, я решил создать облачную систему хранения файлов с `Netty` в качестве ядра. Мной рассматривалось два варианта реализации прикладного протокола взаимодействия между сервером и клиентом. Первый вариант, это работа с передаваемыми байтами через `ByteBuffer Netty`, и второй это работать с настроенными `PipeLine фильтром` (который, к слову все так же работает с `ByteBuffer`, ведь все, что летит по сети - это Байты! ), в котором использовать фильтры сериализации исходящих сообщений и десериализации входящих. Я выбрал второй вариант - работать с объектами, хотя протокол написанный мной в рамках другого проекта с байтами показал большую эффективность.

> <b>Netty</b> — это инфраструктура клиент/сервер, которая использует расширенные сетевые возможности Java, скрывая за собой сложность и предоставляя простой в использовании API.

> В рамках проекта реализованно:

- <b>Сервер Netty</b> запускается и подключает клиентов, пересылает служебные сообщения от клиентов (котороые так же могут нести в себе данные из файла), отвечает за авторизацию пользователей, использует `Data Base SQLite`, для хранения данных пользователей (работа с Data Base через `JDBC`), распределяет и контроллирует выделяемое под пользователей дисковое пространство, по запросу от клиентов проводит действия на закрепленном дисковом пространстве за пользователем. 
- <b>Клиент Java FX</b> запускаясь предлагает пользователю авторизоваться и при успехе предоставляет доступ к основному графическому интерфейсу `(GUI)`. `GUI` показывает состояние хранилища для пользователя: наличие файлов и их свойства, общую наполненность до `10 Gb` (это размер дискогвого пространства, выделяемого каждому пользователю на сервере). Так же `GUI` содержит элементы управления позволяющие выполнять следующие действия.
   - Принять и записать на дисковое пространство пользователя файлы от клиента.
   - Передать файлы клиенту. 
   - Удалить файлы у себя с дискового пространства (закрепленного за пользователем). 

> <b>Техническая часть</b>
 - `IDE: IntelliJ IDEA 2021.3.3`
 - `Версия JDK: 1.8.0_121 + 16 на стороне клиента.`
 - `Netty Framework`
 - `SQLite`
> <b>Используемые технологии:</b>
 - `Java FX`
 - `Java IO, NIO`
 - `Stream API`
 - `Netty`
 - `CSS`
 - `JDBC`
 - `Мавен 3.5`
  
  ![2022-08-26_21-40-44](https://user-images.githubusercontent.com/89448563/186971668-ee48358c-436e-4c15-8dde-a004855b0fbc.png)

Передача данных между клиентом и сервером основанна на Object Message, сообщения могут содержать данные из передаваемых файлов и не превышают 
лимит в 10 Mb. При передаче файлов больших размеров файл разрезается на куски и по частям пересылается.  

## 1. Модуль Server
- Запускается сервер Netty в котором настроен конвеер с двумя декодерами для посылки объектов и получения, а так же Main Handler для обработки 
  полученных объектов сообщений.  
- В Main Handler'e подключен сервис авторизации. (для хранения данных пользователей используем локальную SQLite базу данных).
- При успешной авторизации на сервере отправляется сообщение клиенту и клиент предоставляет доступ к рабочему функционалу облака.
- Все обработчики входящих сообщений при запуске сервера проходят регистрацию (патерн разработки Registry). И в зависимости от полученного сообщения 
  выполняется код обработчика соответствующего типу сообщения.  

## 2. Модуль клиент
- Клиент приложение на Java FX. При запуске запрашивает логин и пароль позльзователя, а при отсутствии аккаунта предоставляет возможность регистрации нового пользователя.
- Запускается клиент Netty в котором настроен конвеер с двумя декодерами для посылки объектов и получения, а так же Main Handler для обработки 
  полученных объектов сообщений.  
- После успешной аутентификации открывается окно в которое клиент подгрузит с сервера актуальную информацию: список файлов этого клиента и общую загруженность облака 
  на сервере (лимит 10 Gb).
- В клиентском окошке есть функционал: добавление файлов из ОС пользователя на сервер, уделение файлов с сервера, копирование файлов с сервера на клиент.
- Так же как и на сервере добавлены обработчики входящих сообщений зарегистрированные в Main Handler'e  (патерн разработки Registry). 
  И в зависимости от полученного сообщения выполняется код обработчика соответствующего типу сообщения.  

